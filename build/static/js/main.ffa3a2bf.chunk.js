(this["webpackJsonpproyectoreactjs-rodriguez"]=this["webpackJsonpproyectoreactjs-rodriguez"]||[]).push([[0],{51:function(e,t,c){},98:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c(29),r=c.n(n),i=c(62),o=c(15),s=c(33),l=c(35),j=c(63),d=c(20),b=c(3),u=Object(a.createContext)(),m=JSON.parse(localStorage.getItem("carrito"))||[],h=function(e){var t=e.children,c=Object(a.useState)(m),n=Object(d.a)(c,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){localStorage.setItem("carrito",JSON.stringify(r))}),[r]),Object(b.jsx)(u.Provider,{value:{carrito:r,addToCart:function(e){i([].concat(Object(j.a)(r),[e]))},removeItem:function(e){var t=r.filter((function(t){return t.id!==e}));i(t)},calcularCantidad:function(){return r.reduce((function(e,t){return e+t.cantidad}),0)},calcularTotal:function(){return r.reduce((function(e,t){return e+t.cantidad*t.price}),0)},vaciarCarrito:function(){i([])},isInCart:function(e){return r.some((function(t){return t.id===e}))}},children:t})},O=function(){var e=Object(a.useContext)(u).calcularCantidad;return Object(b.jsxs)("div",{style:{display:0===e()?"none":"block"},children:[Object(b.jsx)(s.a,{icon:l.a}),Object(b.jsx)("span",{children:e})]})},x=(c(51),function(){return Object(b.jsxs)(i.a,{fill:!0,variant:"tabs",defaultActiveKey:"/home",children:[Object(b.jsx)(o.c,{className:"text-link",activeClassName:"activeLink",exact:!0,to:"/productos/carteras",children:"Carteras"}),Object(b.jsx)(o.c,{className:"text-link",activeClassName:"activeLink",exact:!0,to:"/productos/mochilas",children:"Mochilas"}),Object(b.jsx)(o.c,{className:"text-link",activeClassName:"activeLink",exact:!0,to:"/productos/bandoleras",children:"Bandoleras"}),Object(b.jsx)(o.c,{className:"text-link",activeClassName:"activeLink",exact:!0,to:"/productos/accesorios",children:"Accesorios"}),Object(b.jsx)(o.c,{className:"text-link",activeClassName:"activeLink",exact:!0,to:"/cart",children:Object(b.jsx)(O,{})})]})}),p=c(32),f=c(60),g=c.p+"static/media/logo.21f3a688.png",v=p.a.Brand,y=p.a.Collapse,C=p.a.Toggle,N=function(){return Object(b.jsx)(p.a,{as:"header",expand:"md",bg:"dark",variant:"dark",children:Object(b.jsxs)(f.a,{fluid:!0,children:[Object(b.jsx)(v,{children:Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)("img",{src:g,alt:"logo_img",width:"200px"})})}),Object(b.jsx)(C,{}),Object(b.jsx)(y,{children:Object(b.jsx)(x,{})})]})})},k=c(16),I=c(8),w=c(47),S=(c(52),w.a.initializeApp({apiKey:"AIzaSyCjfx8dMG5lq3rIoq-2bluqwfbXatDwGUo",authDomain:"lasalbarello.firebaseapp.com",projectId:"lasalbarello",storageBucket:"lasalbarello.appspot.com",messagingSenderId:"1011828488917",appId:"1:1011828488917:web:e36ae587aed7c9351c405c"})),T=function(){return w.a.firestore(S)},E=c(101),A=c(100),F=function(e){var t=e.id,c=e.name,a=e.price,n=e.img,r=e.category;return Object(b.jsxs)(E.a,{style:{width:"16rem"},classname:"m-3",children:[Object(b.jsx)(E.a.Img,{variant:"top",src:n}),Object(b.jsxs)(E.a.Body,{children:[Object(b.jsx)(E.a.Title,{children:c}),Object(b.jsxs)(E.a.Text,{children:["Precio: $",a]}),Object(b.jsxs)(E.a.Text,{children:["Categoria: ",r]}),Object(b.jsx)(o.b,{to:"/detail/".concat(t),children:Object(b.jsx)(A.a,{variant:"secondary",children:"VER"})})]})]})},P=function(e){var t=e.items,c=void 0===t?[]:t;return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h2",{children:"Nuestros productos"}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"row",children:c.map((function(e){return Object(a.createElement)(F,Object(k.a)(Object(k.a)({},e),{},{key:e.id}))}))})]})},B=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!1),i=Object(d.a)(r,2),o=i[0],s=i[1],l=Object(I.h)().categoryId;return Object(a.useEffect)((function(){s(!0);var e=T();(l?e.collection("productos").where("category","==",l):e.collection("productos")).get().then((function(e){var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));n(t)})).catch((function(e){return console.log(e)})).finally((function(){s(!1)}))}),[l]),Object(b.jsx)("section",{className:"container my-6",children:o?Object(b.jsx)("h2",{children:"Cargando..."}):Object(b.jsx)(P,{items:c})})},z=function(e){var t=e.cantidad,c=e.modify,a=e.max;return Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){t>1&&c(t-1)},className:"btn ".concat(1===t?"btn-danger desactivado":"btn-secondary"),children:"-"}),Object(b.jsx)("span",{className:"mx-3",children:t}),Object(b.jsx)("button",{onClick:function(){t<a&&c(t+1)},className:"btn ".concat(t===a?"btn-danger desactivado":"btn-secondary"),children:"+"})]})},D=function(e){var t=e.id,c=e.name,n=e.price,r=e.img,i=e.description,s=e.category,l=e.stock,j=Object(I.g)(),m=j.goBack,h=j.push,O=Object(a.useContext)(u),x=O.addToCart,p=O.isInCart,f=Object(a.useState)(0),g=Object(d.a)(f,2),v=g[0],y=g[1];p(t);return Object(b.jsxs)("div",{className:"itemDetail",children:[Object(b.jsx)("h2",{children:c}),Object(b.jsx)("img",{src:r,alt:c}),Object(b.jsx)("p",{children:i}),Object(b.jsxs)("h4",{children:["Precio: $",n]}),p(t)?Object(b.jsx)(o.b,{to:"/cart",className:"btn btn-success",children:"COMPRAR"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(z,{cantidad:v,modify:y,max:l}),Object(b.jsx)("hr",{}),Object(b.jsx)("button",{className:"btn btn-outline-secondary mx-4",onClick:function(){v>0&&x({id:t,name:c,price:n,category:s,cantidad:v})},children:"Agregar al carrito"})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("button",{className:"btn btn-secondary",onClick:function(){return m()},children:"Volver"}),Object(b.jsx)("hr",{}),Object(b.jsx)("button",{className:"btn btn-secondary",onClick:function(){return h("/")},children:"Volver al inicio"})]})},L=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!1),i=Object(d.a)(r,2),o=i[0],s=i[1],l=Object(I.h)().itemId;return Object(a.useEffect)((function(){s(!0),T().collection("productos").doc(l).get().then((function(e){n(Object(k.a)({id:e.id},e.data()))})).catch((function(e){return console.log(e)})).finally((function(){s(!1)}))}),[l]),Object(b.jsx)("div",{children:o?Object(b.jsx)("h2",{children:"Cargando..."}):Object(b.jsx)(D,Object(k.a)({},c))})},R=function(){var e=Object(a.useContext)(u),t=e.carrito,c=e.vaciarCarrito,n=e.removeItem,r=e.calcularTotal;return Object(b.jsx)("div",{className:"container my-5",children:0===t.lenght?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"No hay productos agregados"}),Object(b.jsx)(o.b,{to:"/",className:"btn btn-success",children:"ir a comprar"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Resumen de compra"}),Object(b.jsx)("hr",{}),t.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:e.name}),Object(b.jsxs)("p",{children:["Cantidad: ",e.cantidad]}),Object(b.jsxs)("p",{children:["Precio:$ ",e.price*e.cantidad]}),Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){return n(e.id)},children:Object(b.jsx)(s.a,{icon:l.b})})]})})),Object(b.jsx)("hr",{}),Object(b.jsxs)("h2",{children:["Total: $",r()," "]}),Object(b.jsx)(o.b,{className:"btn btn-success mx-3",to:"/checkout",children:"Terminar mi compra"}),Object(b.jsx)("hr",{}),Object(b.jsx)("button",{className:"btn btn-danger",onClick:c,children:"Vaciar Carrito"})]})})},J=c(38),V=c(48),$=c.n(V),q=c(49),G=c.n(q),M=c(61),K=c(50),U=function(){var e=Object(a.useContext)(u),t=e.carrito,c=e.calcularTotal,n=e.vaciarCarrito,r=Object(a.useState)({nombre:"",apellido:"",email:"",tel:""}),i=Object(d.a)(r,2),o=i[0],s=i[1],l=function(e){s(Object(k.a)(Object(k.a)({},o),{},Object(J.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)(b.Fragment,{children:[0===t.lenght&&Object(b.jsx)(I.a,{to:"/"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Complete sus datos"}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{ClassName:"container my-5",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.nombre.lenght<3?alert("Nombre invalido"):o.apellido.lenght<3?alert("Apellido invalido"):o.email.lenght<3?alert("Email invalido"):o.tel.lenght<7?alert("Telefono invalido"):function(e,t,c){return new Promise(function(){var a=Object(M.a)(G.a.mark((function a(n,r){var i,o,s,l,j,d,b;return G.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i={buyer:e,items:t.map((function(e){return{id:e.id,precio:e.price,cantidad:e.cantidad}})),total:c,date:K.a.firestore.Timestamp.fromDate(new Date)},o=T(),s=o.collection("orders"),l=o.collection("productos").where(K.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.id}))),a.next=6,l.get();case 6:j=a.sent,d=o.batch(),b=[],j.docs.forEach((function(e){var c=t.find((function(t){return t.id===e.id}));e.data().stock>=c.cantidad?d.update(e.ref,{stock:e.data().stock-c.cantidad}):b.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),0===b.length?s.add(i).then((function(e){d.commit(),n(e.id)})).catch((function(e){r(e)})):r(b);case 11:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}(o,t,c()).then((function(e){$.a.fire({icon:"success",title:"Orden registrada!",text:"Guarde su n\xfamero: ".concat(e),willClose:function(){n()}})})).catch((function(e){$.a.fire({icon:"error",title:"Producto sin stock",text:"No hay stock de: ".concat(e.map((function(e){return e.name})).join(", "))})})).finally(!1)},children:[Object(b.jsx)("h2",{children:"Formulario"}),Object(b.jsx)("input",{type:"text",className:"form-control my-2",placeholder:"Nombre",name:"nombre",value:o.nombre,onChange:l}),0===o.nombre.length&&Object(b.jsx)("small",{children:"Este campo es obligatorio"}),Object(b.jsx)("input",{type:"text",className:"form-control my-2",placeholder:"Apellido",name:"apellido",value:o.apellido,onChange:l}),0===o.apellido.length&&Object(b.jsx)("small",{children:"Este campo es obligatorio"}),Object(b.jsx)("input",{type:"email",className:"form-control my-2",placeholder:"Email",name:"email",value:o.email,onChange:l}),0===o.email.length&&Object(b.jsx)("small",{children:"Este campo es obligatorio"}),Object(b.jsx)("input",{type:"tel",className:"form-control my-2",placeholder:"Tel\xe9fono",name:"tel",value:o.tel,onChange:l}),0===o.tel.length&&Object(b.jsx)("small",{children:"Este campo es obligatorio"}),Object(b.jsx)("button",{classname:"btn btn-success",type:"submit",children:"Finalizar compra"})]})})]})]})},X=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("p",{children:"\xa9 Copyright 2021 - Brenda Rodriguez"})})};var _=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(h,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(N,{}),Object(b.jsx)(f.a,{fluid:!0,children:Object(b.jsxs)(I.d,{children:[Object(b.jsx)(I.b,{exact:!0,path:"/",component:B}),Object(b.jsx)(I.b,{exact:!0,path:"/productos/:categoryId",component:B}),Object(b.jsx)(I.b,{exact:!0,path:"/detail/:itemId",component:L}),Object(b.jsx)(I.b,{exact:!0,path:"/cart",component:R}),Object(b.jsx)(I.b,{exact:!0,path:"/checkout",component:U})]})}),Object(b.jsx)(X,{})]})})})};c(97);r.a.render(Object(b.jsx)(_,{}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.ffa3a2bf.chunk.js.map